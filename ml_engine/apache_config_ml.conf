# Apache 反向代理配置 - ML API
# 將此配置添加到 /etc/apache2/sites-available/000-default.conf

# ML API 代理配置
# 將 /ml 路徑代理到 ML API 服務器 (port 8000)
ProxyPass /ml http://localhost:8000
ProxyPassReverse /ml http://localhost:8000

# 設置代理超時（ML 預測可能需要較長時間）
ProxyTimeout 60

# 保留原始 Host header
ProxyPreserveHost On

# WebSocket 支持（如果需要）
# RewriteEngine on
# RewriteCond %{HTTP:Upgrade} websocket [NC]
# RewriteCond %{HTTP:Connection} upgrade [NC]
# RewriteRule ^/ml/?(.*) "ws://localhost:8000/$1" [P,L]

# CORS headers（如果需要額外設置）
# <Location /ml>
#     Header set Access-Control-Allow-Origin "*"
#     Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
#     Header set Access-Control-Allow-Headers "Content-Type, Authorization"
# </Location>
