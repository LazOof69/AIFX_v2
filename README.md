# AIFX v2 - AI-Powered Forex Trading Advisory System

<div align="center">

![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)
![Python](https://img.shields.io/badge/python-%3E%3D3.8-blue.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-14+-blue.svg)
![TensorFlow](https://img.shields.io/badge/TensorFlow-2.10+-orange.svg)

**智能外匯交易顧問系統 | Intelligent Forex Trading Advisory System**

*運用機器學習與技術分析，透過 Discord / LINE 推送即時交易訊號*

[功能特色](#-功能特色) •
[系統架構](#-系統架構) •
[ML訓練流程](#-機器學習訓練架構) •
[API傳輸](#-api-傳輸流程) •
[常見問題](#-常見問題)

</div>

---

## 📋 目錄

- [專案簡介](#-專案簡介)
- [功能特色](#-功能特色)
- [系統架構](#-系統架構)
- [技術棧](#-技術棧)
- [目錄結構](#-目錄結構)
- [快速開始](#-快速開始)
- [環境配置](#-環境配置)
- [機器學習訓練架構](#-機器學習訓練架構)
- [API 傳輸流程](#-api-傳輸流程)
- [用戶識別系統](#-用戶識別系統)
- [資料庫設計](#-資料庫設計)
- [回測系統](#-回測系統)
- [通知系統](#-通知系統)
- [部署指南](#-部署指南)
- [未來展望](#-未來展望)
- [常見問題](#-常見問題)

---

## 📖 專案簡介

### 背景與動機

外匯市場是全球最大的金融市場，日均交易量超過 **6.6 兆美元**。然而，對於一般投資者而言，要在這個 24 小時運作的市場中做出正確的交易決策是極具挑戰性的。

**AIFX v2** 旨在解決以下問題：

| 問題 | 描述 |
|------|------|
| 🕐 **時間限制** | 投資者無法 24 小時盯盤 |
| 📊 **資訊過載** | 市場數據繁雜，難以快速分析 |
| 😰 **情緒干擾** | 人為交易容易受情緒影響 |
| 📈 **技術門檻** | 技術分析需要專業知識 |

### 解決方案

AIFX v2 是一個整合 **人工智慧** 與 **技術分析** 的智能交易顧問系統，透過 **Discord** 和 **LINE** 即時推送交易訊號：

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        AIFX v2 核心價值                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   🤖 機器學習預測        使用 LSTM 深度學習模型分析歷史數據              │
│                                                                          │
│   📊 多維度分析          整合技術指標、市場情緒、價格模式                │
│                                                                          │
│   🔔 即時通知            透過 Discord / LINE Bot 推送交易訊號            │
│                                                                          │
│   📉 回測驗證            提供歷史數據回測，驗證策略有效性                │
│                                                                          │
│   ⚠️ 風險提醒            每則訊號附帶風險警語提示                        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 專案目標

| 目標 | 描述 | 達成狀態 |
|------|------|----------|
| **準確性** | 透過 ML 模型提高訊號準確度 | ✅ 已實現 |
| **即時性** | 毫秒級訊號推送至 Discord/LINE | ✅ 已實現 |
| **易用性** | 透過 Bot 指令互動查詢 | ✅ 已實現 |
| **可靠性** | 微服務架構確保系統穩定 | ✅ 已實現 |
| **可擴展性** | 模組化設計支援功能擴展 | ✅ 已實現 |

---

## ✨ 功能特色

### 系統功能總覽

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       AIFX v2 功能架構圖                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌───────────────┐     ┌───────────────┐     ┌───────────────┐        │
│   │   市場數據    │────▶│   AI 分析     │────▶│   訊號生成    │        │
│   │   獲取模組    │     │   引擎        │     │   系統        │        │
│   └───────────────┘     └───────────────┘     └───────┬───────┘        │
│          │                                             │                │
│          ▼                                             ▼                │
│   ┌───────────────┐                           ┌───────────────┐        │
│   │   技術指標    │                           │   Bot 通知    │        │
│   │   計算        │                           │   推送系統    │        │
│   └───────────────┘                           └───────────────┘        │
│          │                                             │                │
│          ▼                                             ▼                │
│   ┌───────────────┐                         ┌─────────┬─────────┐     │
│   │   回測系統    │                         │ Discord │  LINE   │     │
│   │   績效分析    │                         │   Bot   │   Bot   │     │
│   └───────────────┘                         └─────────┴─────────┘     │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 核心功能模組

#### 1. 📊 市場數據模組

| 功能 | 描述 |
|------|------|
| **多數據源整合** | Alpha Vantage、Twelve Data、yFinance |
| **即時報價** | 主要貨幣對即時價格 |
| **歷史數據** | 支援多時間週期（15分鐘/1小時/1天/1週） |
| **智能快取** | Redis 快取減少 API 請求 |

#### 2. 🤖 AI 預測引擎

| 功能 | 描述 |
|------|------|
| **LSTM 模型** | 長短期記憶網路預測價格走勢 |
| **技術指標** | SMA、EMA、RSI、MACD、Bollinger Bands |
| **情緒分析** | NewsAPI 新聞 + 央行政策情緒 (FinBERT/VADER) |
| **訊號融合** | 技術分析 + 情緒分析加權融合決策 |
| **信心評分** | 每個預測附帶置信度分數 (0-100%) |

**情緒權重機制**（時間跨度越長，情緒影響越大）：

| 時間框架 | 技術權重 | 情緒權重 | 說明 |
|----------|----------|----------|------|
| 15分鐘 | 95% | 5% | 短線以技術為主 |
| 1小時 | 85% | 15% | 波段交易平衡 |
| 4小時 | 70% | 30% | 中期考量情緒 |
| 1天 | 55% | 45% | 日線重視基本面 |
| 1週 | 40% | 60% | 長線情緒主導 |

#### 3. 📈 交易訊號系統

| 週期類型 | 時間框架 | 適用交易者 |
|----------|----------|------------|
| **日內交易 (Intraday)** | 15分鐘 | 短線交易者 |
| **波段交易 (Swing)** | 1小時 | 波段交易者 |
| **部位交易 (Position)** | 1天 | 中期投資者 |
| **長期交易 (Longterm)** | 1週 | 長期投資者 |

#### 4. 🔔 Bot 通知系統

| 渠道 | 功能 |
|------|------|
| **Discord Bot** | 群組推送、個人訂閱、斜線命令互動 |
| **LINE Bot** | 即時推送、互動查詢、訂閱管理 |

#### 5. 📉 回測系統

| 功能 | 描述 |
|------|------|
| **歷史模擬** | 使用歷史數據驗證策略 |
| **績效指標** | 8 項關鍵指標分析 |
| **視覺化報告** | 自動生成 6 種圖表與 HTML 報告 |

---

## 🏗 系統架構

### 微服務架構圖

```
                              ┌─────────────────────────────────────────────┐
                              │              用戶端 (Clients)                │
                              ├─────────────────────────────────────────────┤
                              │                                              │
                              │         ┌─────────┐       ┌─────────┐      │
                              │         │ Discord │       │  LINE   │      │
                              │         │   App   │       │   App   │      │
                              │         └────┬────┘       └────┬────┘      │
                              │              │                  │           │
                              └──────────────┼──────────────────┼───────────┘
                                             │                  │
                    ┌────────────────────────┼──────────────────┼────────────────────────┐
                    │                        ▼                  ▼                        │
                    │              ┌─────────────┐      ┌─────────────┐                 │
                    │              │  Discord    │      │   LINE      │                 │
                    │              │  Bot        │      │   Bot       │                 │
                    │              └──────┬──────┘      └──────┬──────┘                 │
                    │                     │                    │                         │
                    │                     └─────────┬──────────┘                         │
                    │                               │ REST API                           │
                    │                               ▼                                    │
                    │  ┌────────────────────────────────────────────────────────────┐   │
                    │  │                    Backend API                              │   │
                    │  │                   (Port 3000)                               │   │
                    │  │  ┌──────────────────────────────────────────────────────┐  │   │
                    │  │  │  • 用戶管理（Discord ID / LINE ID）                   │  │   │
                    │  │  │  • 訂閱管理                                           │  │   │
                    │  │  │  • 交易訊號生成與儲存                                 │  │   │
                    │  │  │  • 市場數據處理                                       │  │   │
                    │  │  └──────────────────────────────────────────────────────┘  │   │
                    │  └────────────────────────┬───────────────────────────────────┘   │
                    │                           │                                        │
                    │           ┌───────────────┼───────────────┐                       │
                    │           ▼               ▼               ▼                       │
                    │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │
                    │  │ PostgreSQL  │  │    Redis    │  │  ML Engine  │               │
                    │  │  Database   │  │    Cache    │  │ (Port 8000) │               │
                    │  └─────────────┘  └─────────────┘  └─────────────┘               │
                    │                                                                    │
                    │                    服務層 (Services)                               │
                    └────────────────────────────────────────────────────────────────────┘
```

### 服務通訊規則

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          服務通訊架構                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Discord Bot ────── REST API ──────┐                                       │
│                                      │                                       │
│   LINE Bot ──────── REST API ───────┼────▶ Backend API (Port 3000)         │
│                                      │            │                          │
│                                      │            ├──── REST ────▶ ML Engine │
│                                      │            │               (Port 8000)│
│                                      │            │                          │
│                                      │            ▼                          │
│                                      │     ┌─────────────┐                  │
│                                      │     │ PostgreSQL  │                  │
│                                      │     │ + Redis     │                  │
│                                      │     └─────────────┘                  │
│                                                                              │
│   ╔═════════════════════════════════════════════════════════════════════╗   │
│   ║  重要規則：                                                          ║   │
│   ║  • 只有 Backend 可以直接存取 PostgreSQL                             ║   │
│   ║  • Discord Bot / LINE Bot 必須透過 Backend API                      ║   │
│   ║  • ML Engine 透過 REST API 與 Backend 通訊                          ║   │
│   ║  • 所有服務間通訊使用 REST API                                      ║   │
│   ╚═════════════════════════════════════════════════════════════════════╝   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🛠 技術棧

### 技術棧總覽

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           AIFX v2 技術棧                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                        Backend Layer                                 │   │
│   │  Node.js 18 │ Express 4.18 │ Sequelize │ JWT │ API Key Auth         │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                      │                                       │
│                    ┌─────────────────┼─────────────────┐                    │
│                    ▼                 ▼                 ▼                    │
│   ┌─────────────────────┐ ┌─────────────────┐ ┌─────────────────────────┐  │
│   │   Data Layer        │ │   Cache Layer   │ │   ML Layer              │  │
│   │  PostgreSQL 14      │ │   Redis 6       │ │  Python 3.8             │  │
│   │  Sequelize ORM      │ │                 │ │  TensorFlow 2.10        │  │
│   └─────────────────────┘ └─────────────────┘ │  FastAPI                │  │
│                                               │  scikit-learn           │  │
│                                               └─────────────────────────┘  │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                        Bot Layer                                     │   │
│   │  Discord.js 14 │ LINE Bot SDK 8 │ Axios                             │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 詳細技術列表

#### 後端技術 (Backend)

| 技術 | 版本 | 用途 |
|------|------|------|
| **Node.js** | ≥18.0.0 | JavaScript 執行環境 |
| **Express.js** | ^4.18.0 | Web 應用框架 |
| **Sequelize** | ^6.0.0 | ORM 資料庫操作 |
| **PostgreSQL** | ≥14.0 | 關聯式資料庫 |
| **Redis** | ≥6.0 | 快取與 Session |
| **Axios** | ^1.0.0 | HTTP 請求客戶端 |
| **Winston** | ^3.0.0 | 日誌記錄 |
| **Joi** | ^17.0.0 | 請求驗證 |

#### 機器學習 (ML Engine)

| 技術 | 版本 | 用途 |
|------|------|------|
| **Python** | ≥3.8 | 程式語言 |
| **TensorFlow** | ≥2.10.0 | 深度學習框架 |
| **Keras** | (內建於TF) | 高階神經網路 API |
| **scikit-learn** | ≥1.0.0 | 機器學習工具 |
| **Pandas** | ≥1.5.0 | 數據處理 |
| **NumPy** | ≥1.23.0 | 數值計算 |
| **FastAPI** | ≥0.100.0 | 高性能 API 框架 |
| **Uvicorn** | ≥0.23.0 | ASGI 服務器 |
| **Matplotlib** | ≥3.7.0 | 圖表繪製 |
| **Seaborn** | ≥0.12.0 | 統計視覺化 |

#### Bot 服務

| 技術 | 版本 | 用途 |
|------|------|------|
| **Discord.js** | ^14.0.0 | Discord Bot 開發 |
| **LINE Bot SDK** | ^8.0.0 | LINE Bot 開發 |
| **Axios** | ^1.0.0 | HTTP 請求 |

---

## 📁 目錄結構

```
AIFX_v2/
│
├── 📂 backend/                      # 後端 API 服務
│   ├── 📂 src/
│   │   ├── 📂 config/              # 配置文件
│   │   │   ├── database.js         # 資料庫配置
│   │   │   └── redis.js            # Redis 配置
│   │   ├── 📂 controllers/         # 控制器
│   │   │   ├── signalController.js # 訊號控制器
│   │   │   └── discordController.js# Discord API 控制器
│   │   ├── 📂 middleware/          # 中間件
│   │   │   └── auth.js             # API Key 認證
│   │   ├── 📂 models/              # Sequelize 模型
│   │   │   ├── UserDiscordSettings.js  # Discord 用戶
│   │   │   ├── UserLineSettings.js     # LINE 用戶
│   │   │   ├── TradingSignal.js        # 交易訊號
│   │   │   └── MarketData.js           # 市場數據
│   │   ├── 📂 routes/              # 路由定義
│   │   │   └── 📂 api/v1/          # API v1 路由
│   │   ├── 📂 services/            # 業務邏輯服務
│   │   │   ├── forexService.js     # 外匯數據服務
│   │   │   └── signalService.js    # 訊號服務
│   │   └── app.js                  # 應用入口
│   ├── package.json
│   └── .env.example
│
├── 📂 ml_engine/                    # 機器學習引擎 ⭐
│   ├── 📂 api/                     # ML API 服務
│   │   ├── ml_server.py            # FastAPI 服務器
│   │   └── prediction_service.py   # 預測服務
│   ├── 📂 models/                  # 訓練好的模型
│   │   └── lstm_model.h5           # LSTM 模型權重
│   ├── 📂 training/                # 模型訓練
│   │   ├── train_lstm.py           # LSTM 訓練腳本
│   │   └── feature_engineering.py  # 特徵工程
│   ├── 📂 data_processing/         # 數據處理
│   │   ├── yfinance_fetcher.py     # yFinance 數據獲取
│   │   └── data_preprocessor.py    # 數據預處理
│   ├── 📂 backtest/                # 回測系統
│   │   ├── backtest_engine.py      # 回測引擎
│   │   ├── historical_backtest.py  # 歷史回測
│   │   ├── chart_generator.py      # 圖表生成器
│   │   └── 📂 reports/             # 回測報告
│   ├── 📂 scripts/                 # 執行腳本
│   │   ├── daily_incremental_training.py   # 每日增量訓練
│   │   └── weekly_full_training.py         # 每週完整訓練
│   ├── requirements.txt
│   └── start.sh
│
├── 📂 discord_bot/                  # Discord Bot 服務
│   ├── bot.js                      # Bot 入口
│   ├── deploy-commands.js          # 斜線命令部署
│   ├── 📂 commands/                # Bot 命令
│   ├── 📂 events/                  # 事件處理
│   └── 📂 services/                # Bot 服務
│
├── 📂 line_bot/                     # LINE Bot 服務
│   ├── bot.js                      # Bot 入口
│   ├── 📂 handlers/                # 訊息處理器
│   └── 📂 services/                # Bot 服務
│       ├── backendClient.js        # 後端 API 客戶端
│       └── messageBuilder.js       # 訊息建構器
│
├── 📂 database/                     # 資料庫相關
│   ├── 📂 migrations/              # 資料庫遷移
│   └── 📂 seeders/                 # 種子數據
│
├── 📄 CLAUDE.md                     # Claude Code 開發規範
├── 📄 README.md                     # 專案說明文檔 (本文件)
└── 📄 .gitignore                    # Git 忽略規則
```

---

## 🚀 快速開始

### 前置需求

| 軟體 | 版本 | 必要性 |
|------|------|--------|
| Node.js | ≥ 18.0.0 | 必要 |
| Python | ≥ 3.8 | 必要 |
| PostgreSQL | ≥ 14.0 | 必要 |
| Redis | ≥ 6.0 | 必要 |
| Git | 最新版 | 必要 |

### 安裝步驟

#### Step 1: 克隆專案

```bash
git clone https://github.com/LazOof69/AIFX_v2.git
cd AIFX_v2
```

#### Step 2: 安裝後端依賴

```bash
cd backend
npm install
cp .env.example .env
# 編輯 .env 配置資料庫和 API 金鑰
```

#### Step 3: 安裝 ML Engine 依賴

```bash
cd ../ml_engine
pip install -r requirements.txt
```

#### Step 4: 安裝 Bot 依賴

```bash
# Discord Bot
cd ../discord_bot
npm install

# LINE Bot
cd ../line_bot
npm install
```

#### Step 5: 設置資料庫

```bash
# 創建資料庫
createdb aifx_v2_dev

# 執行遷移
cd ../backend
npx sequelize-cli db:migrate
```

#### Step 6: 啟動服務

```bash
# 終端 1 - Backend API
cd backend && npm run dev

# 終端 2 - ML Engine
cd ml_engine && python api/ml_server.py

# 終端 3 - Discord Bot
cd discord_bot && node bot.js

# 終端 4 - LINE Bot
cd line_bot && node bot.js
```

#### Step 7: 驗證服務

| 服務 | URL | 說明 |
|------|-----|------|
| Backend API | http://localhost:3000 | API 服務 |
| ML Engine | http://localhost:8000 | 機器學習預測服務 |

---

## ⚙ 環境配置

### Backend (.env)

```env
# ===== 服務配置 =====
NODE_ENV=development
PORT=3000

# ===== 資料庫 =====
DATABASE_URL=postgresql://user:password@localhost:5432/aifx_v2_dev

# ===== Redis =====
REDIS_URL=redis://localhost:6379

# ===== 外部 API 金鑰 =====
ALPHA_VANTAGE_KEY=your-alpha-vantage-api-key
TWELVE_DATA_KEY=your-twelve-data-api-key

# ===== ML Engine =====
ML_API_URL=http://localhost:8000

# ===== Discord Bot =====
DISCORD_BOT_TOKEN=your-discord-bot-token
DISCORD_CLIENT_ID=your-discord-client-id

# ===== LINE Bot =====
LINE_CHANNEL_ACCESS_TOKEN=your-line-channel-access-token
LINE_CHANNEL_SECRET=your-line-channel-secret

# ===== 服務間 API Keys (64字元十六進位) =====
API_KEY=your-64-character-hex-api-key-for-discord
LINE_BOT_API_KEY=your-64-character-hex-api-key-for-line
```

---

## 🧠 機器學習訓練架構

### 完整訓練流程圖

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                        LSTM 模型訓練完整流程                                  │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║                     Step 1: 數據收集 (Data Collection)                 ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                                                               │
│      ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                  │
│      │ yFinance    │    │Alpha Vantage│    │ Twelve Data │                  │
│      │ (主要)      │    │ (備用)      │    │ (備用)      │                  │
│      └──────┬──────┘    └──────┬──────┘    └──────┬──────┘                  │
│             │                  │                  │                          │
│             └──────────────────┼──────────────────┘                          │
│                                ▼                                             │
│                    ┌───────────────────────┐                                 │
│                    │   Raw OHLCV Data      │                                 │
│                    │   (Open, High, Low,   │                                 │
│                    │    Close, Volume)     │                                 │
│                    └───────────┬───────────┘                                 │
│                                │                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║                     Step 2: 特徵工程 (Feature Engineering)             ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                │                                             │
│                                ▼                                             │
│    ┌─────────────────────────────────────────────────────────────────────┐   │
│    │                      技術指標計算                                    │   │
│    │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                 │   │
│    │  │ 移動平均    │  │ 動量指標    │  │ 波動性指標  │                 │   │
│    │  │ • SMA(5)    │  │ • RSI(14)   │  │ • BB Upper  │                 │   │
│    │  │ • SMA(20)   │  │ • MACD      │  │ • BB Lower  │                 │   │
│    │  │ • EMA(12)   │  │ • MACD Sig  │  │             │                 │   │
│    │  │ • EMA(26)   │  │             │  │             │                 │   │
│    │  └─────────────┘  └─────────────┘  └─────────────┘                 │   │
│    └─────────────────────────────────────────────────────────────────────┘   │
│                                │                                             │
│                                ▼                                             │
│                    ┌───────────────────────┐                                 │
│                    │   特徵向量 (12維)     │                                 │
│                    │   [O,H,L,C,V,SMA5,    │                                 │
│                    │    SMA20,EMA12,RSI,   │                                 │
│                    │    MACD,BB_U,BB_L]    │                                 │
│                    └───────────┬───────────┘                                 │
│                                │                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║                     Step 3: 數據預處理 (Preprocessing)                 ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                │                                             │
│                                ▼                                             │
│    ┌─────────────────────────────────────────────────────────────────────┐   │
│    │                      預處理步驟                                      │   │
│    │                                                                      │   │
│    │  1. 標準化 (StandardScaler)                                         │   │
│    │     └── 將數據縮放到平均值=0, 標準差=1                              │   │
│    │                                                                      │   │
│    │  2. 序列化 (Windowing)                                              │   │
│    │     └── 將數據轉換為 60 個時間步的序列                              │   │
│    │     └── 輸入: [t-59, t-58, ..., t-1, t]                             │   │
│    │     └── 輸出: t+1 的方向 (Long/Short/Standby)                       │   │
│    │                                                                      │   │
│    │  3. 標籤生成 (Labeling)                                             │   │
│    │     └── 根據未來價格變化生成 3 類標籤                               │   │
│    │     └── 上漲 > 0.1% → Long (買入)                                   │   │
│    │     └── 下跌 > 0.1% → Short (賣出)                                  │   │
│    │     └── 其他 → Standby (觀望)                                       │   │
│    │                                                                      │   │
│    │  4. 數據分割                                                        │   │
│    │     └── 訓練集: 80%                                                 │   │
│    │     └── 測試集: 20%                                                 │   │
│    └─────────────────────────────────────────────────────────────────────┘   │
│                                │                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║                     Step 4: 模型訓練 (Model Training)                  ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                │                                             │
│                                ▼                                             │
│    ┌─────────────────────────────────────────────────────────────────────┐   │
│    │                      LSTM 神經網路架構                               │   │
│    │                                                                      │   │
│    │  Input: (batch_size, 60, 12)                                        │   │
│    │     │                                                                │   │
│    │     ▼                                                                │   │
│    │  ┌────────────────────────────────────┐                             │   │
│    │  │  LSTM Layer 1 (128 units)          │                             │   │
│    │  │  return_sequences=True             │                             │   │
│    │  └──────────────────┬─────────────────┘                             │   │
│    │                     ▼                                                │   │
│    │  ┌────────────────────────────────────┐                             │   │
│    │  │  LSTM Layer 2 (64 units)           │                             │   │
│    │  │  return_sequences=False            │                             │   │
│    │  └──────────────────┬─────────────────┘                             │   │
│    │                     ▼                                                │   │
│    │  ┌────────────────────────────────────┐                             │   │
│    │  │  Dropout (0.2)                     │  ← 防止過擬合               │   │
│    │  └──────────────────┬─────────────────┘                             │   │
│    │                     ▼                                                │   │
│    │  ┌────────────────────────────────────┐                             │   │
│    │  │  Dense (32 units, ReLU)            │                             │   │
│    │  └──────────────────┬─────────────────┘                             │   │
│    │                     ▼                                                │   │
│    │  ┌────────────────────────────────────┐                             │   │
│    │  │  Dense (3 units, Softmax)          │  ← 輸出 3 類機率            │   │
│    │  └──────────────────┬─────────────────┘                             │   │
│    │                     ▼                                                │   │
│    │  Output: [P(Long), P(Short), P(Standby)]                            │   │
│    │                                                                      │   │
│    │  訓練參數:                                                          │   │
│    │  • 優化器: Adam (learning_rate=0.001)                               │   │
│    │  • 損失函數: Categorical Crossentropy                               │   │
│    │  • 批次大小: 32                                                     │   │
│    │  • 訓練輪次: 100 epochs                                             │   │
│    │  • 早停: patience=10 (防止過擬合)                                   │   │
│    └─────────────────────────────────────────────────────────────────────┘   │
│                                │                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║                     Step 5: 模型儲存 (Model Saving)                    ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                │                                             │
│                                ▼                                             │
│                    ┌───────────────────────┐                                 │
│                    │  儲存檔案:            │                                 │
│                    │  • lstm_model.h5      │  ← 模型權重                    │
│                    │  • scaler.pkl         │  ← 標準化器                    │
│                    │  • config.json        │  ← 模型配置                    │
│                    └───────────────────────┘                                 │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 訓練排程

| 訓練類型 | 頻率 | 腳本 | 說明 |
|----------|------|------|------|
| **完整訓練** | 每週一次 | `weekly_full_training.py` | 使用所有歷史數據重新訓練 |
| **增量訓練** | 每日一次 | `daily_incremental_training.py` | 使用最新數據微調模型 |

### 執行訓練

```bash
# 進入 ML Engine 目錄
cd ml_engine

# 完整訓練 (約需 30-60 分鐘)
python scripts/weekly_full_training.py

# 增量訓練 (約需 5-10 分鐘)
python scripts/daily_incremental_training.py
```

---

## 📡 API 傳輸流程

### 完整 API 呼叫流程圖

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                        API 傳輸完整流程                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║           情境 1: Discord Bot 獲取交易訊號                             ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                                                               │
│   Discord User                Discord Bot              Backend API            │
│       │                          │                        │                   │
│       │   /signal EUR/USD        │                        │                   │
│       │─────────────────────────▶│                        │                   │
│       │                          │                        │                   │
│       │                          │  GET /api/v1/discord/signals/EUR/USD      │
│       │                          │  Headers:                                  │
│       │                          │    X-API-Key: <64字元API金鑰>             │
│       │                          │────────────────────────▶│                  │
│       │                          │                        │                   │
│       │                          │                        │ ┌──────────────┐ │
│       │                          │                        │ │ 驗證 API Key │ │
│       │                          │                        │ └──────┬───────┘ │
│       │                          │                        │        │         │
│       │                          │                        │        ▼         │
│       │                          │                        │ ┌──────────────┐ │
│       │                          │                        │ │查詢 Redis    │ │
│       │                          │                        │ │快取          │ │
│       │                          │                        │ └──────┬───────┘ │
│       │                          │                        │        │         │
│       │                          │                        │   命中? │ 未命中 │
│       │                          │                        │    ▼    │   │    │
│       │                          │                        │ 返回    │   │    │
│       │                          │                        │ 快取    │   ▼    │
│       │                          │                        │        │ ┌──────┐│
│       │                          │                        │        │ │呼叫  ││
│       │                          │                        │        │ │ML API││
│       │                          │                        │        │ └──┬───┘│
│       │                          │                        │        │    │    │
│       │                          │  Response:            │◀───────┴────┘    │
│       │                          │  {                     │                   │
│       │                          │    "success": true,    │                   │
│       │                          │    "data": {           │                   │
│       │                          │      "pair": "EUR/USD",│                   │
│       │                          │      "action": "long", │                   │
│       │                          │      "confidence": 75, │                   │
│       │                          │      "entry_price": 1.0850,               │
│       │                          │      "stop_loss": 1.0820,                 │
│       │                          │      "take_profit": 1.0920                │
│       │                          │    }                   │                   │
│       │                          │  }                     │                   │
│       │                          │◀───────────────────────│                   │
│       │                          │                        │                   │
│       │  📊 訊號 Embed Message   │                        │                   │
│       │◀─────────────────────────│                        │                   │
│       │                          │                        │                   │
│                                                                               │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║           情境 2: LINE Bot 獲取交易訊號                                ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                                                               │
│   LINE User                   LINE Bot                 Backend API            │
│       │                          │                        │                   │
│       │   "訊號"                 │                        │                   │
│       │─────────────────────────▶│                        │                   │
│       │                          │                        │                   │
│       │                          │  GET /api/v1/line/signals                 │
│       │                          │  Headers:                                  │
│       │                          │    Authorization: Bearer <API_KEY>        │
│       │                          │────────────────────────▶│                  │
│       │                          │                        │                   │
│       │                          │                        │ (同上處理流程)   │
│       │                          │                        │                   │
│       │                          │  Response: { signals } │                   │
│       │                          │◀───────────────────────│                   │
│       │                          │                        │                   │
│       │   Flex Message          │                        │                   │
│       │◀─────────────────────────│                        │                   │
│       │                          │                        │                   │
│                                                                               │
│  ╔═══════════════════════════════════════════════════════════════════════╗   │
│  ║           情境 3: Backend 呼叫 ML Engine 獲取預測                      ║   │
│  ╚═══════════════════════════════════════════════════════════════════════╝   │
│                                                                               │
│   Backend API                                          ML Engine              │
│       │                                                   │                   │
│       │  POST /api/v1/predict                             │                   │
│       │  Body: {                                          │                   │
│       │    "pair": "EUR/USD",                             │                   │
│       │    "timeframe": "1h",                             │                   │
│       │    "data": [ ... OHLCV array ... ]                │                   │
│       │  }                                                │                   │
│       │──────────────────────────────────────────────────▶│                   │
│       │                                                   │                   │
│       │                                                   │ ┌──────────────┐ │
│       │                                                   │ │ 1. 數據預處理│ │
│       │                                                   │ │    標準化    │ │
│       │                                                   │ └──────┬───────┘ │
│       │                                                   │        ▼         │
│       │                                                   │ ┌──────────────┐ │
│       │                                                   │ │ 2. 特徵工程  │ │
│       │                                                   │ │    計算指標  │ │
│       │                                                   │ └──────┬───────┘ │
│       │                                                   │        ▼         │
│       │                                                   │ ┌──────────────┐ │
│       │                                                   │ │ 3. LSTM 推論 │ │
│       │                                                   │ │    模型預測  │ │
│       │                                                   │ └──────┬───────┘ │
│       │                                                   │        ▼         │
│       │  Response:                                        │                   │
│       │  {                                                │                   │
│       │    "prediction": "long",                          │                   │
│       │    "confidence": 0.75,                            │                   │
│       │    "probabilities": {                             │                   │
│       │      "long": 0.75,                                │                   │
│       │      "short": 0.15,                               │                   │
│       │      "standby": 0.10                              │                   │
│       │    },                                             │                   │
│       │    "factors": {                                   │                   │
│       │      "technical": 0.80,                           │                   │
│       │      "trend": 0.72                                │                   │
│       │    }                                              │                   │
│       │  }                                                │                   │
│       │◀──────────────────────────────────────────────────│                   │
│       │                                                   │                   │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
```

### API 認證機制

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        API 認證流程                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     認證方式 1: X-API-Key Header                     │   │
│   │                        (Discord Bot 使用)                            │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   Request:                                                                   │
│   GET /api/v1/discord/signals/EUR/USD                                       │
│   Headers:                                                                   │
│     X-API-Key: 64字元十六進位金鑰                                           │
│                                                                              │
│   驗證流程:                                                                  │
│   1. 檢查 X-API-Key header 是否存在                                         │
│   2. 比對環境變數 API_KEY                                                   │
│   3. 成功 → 繼續處理請求                                                    │
│   4. 失敗 → 返回 401 Unauthorized                                           │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     認證方式 2: Bearer Token                         │   │
│   │                        (LINE Bot 使用)                               │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   Request:                                                                   │
│   GET /api/v1/line/signals                                                  │
│   Headers:                                                                   │
│     Authorization: Bearer 64字元十六進位金鑰                                │
│                                                                              │
│   驗證流程:                                                                  │
│   1. 檢查 Authorization header 是否存在                                     │
│   2. 提取 Bearer 後的 token                                                 │
│   3. 檢查 token 長度是否為 64 字元 (區分 JWT)                               │
│   4. 比對環境變數 LINE_BOT_API_KEY                                          │
│   5. 成功 → 繼續處理請求                                                    │
│   6. 失敗 → 返回 401 Unauthorized                                           │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     API Key vs JWT 區分                              │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   判斷邏輯:                                                                  │
│   • API Key: 64 字元十六進位，不含 "."                                      │
│   • JWT Token: 較長，包含 "." (header.payload.signature)                    │
│                                                                              │
│   Code:                                                                      │
│   if (token.length === 64 && !token.includes('.')) {                        │
│     // 是 API Key                                                           │
│   } else {                                                                   │
│     // 是 JWT Token                                                         │
│   }                                                                          │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### API 端點列表

| 端點 | 方法 | 描述 | 認證 |
|------|------|------|------|
| `/api/v1/discord/signals` | GET | 獲取所有交易訊號 | API Key |
| `/api/v1/discord/signals/:pair` | GET | 獲取特定貨幣對訊號 | API Key |
| `/api/v1/discord/users/:discordId` | GET | 獲取用戶訂閱狀態 | API Key |
| `/api/v1/discord/users/:discordId/subscribe` | POST | 用戶訂閱 | API Key |
| `/api/v1/line/signals` | GET | 獲取所有交易訊號 | Bearer Token |
| `/api/v1/line/signals/:pair` | GET | 獲取特定貨幣對訊號 | Bearer Token |
| `/api/v1/line/users/:lineId` | GET | 獲取用戶訂閱狀態 | Bearer Token |
| `/health` | GET | 健康檢查 | 無 |

### 回應格式

```json
// 成功回應
{
  "success": true,
  "data": {
    "pair": "EUR/USD",
    "action": "long",
    "confidence": 75,
    "entry_price": 1.0850,
    "stop_loss": 1.0820,
    "take_profit": 1.0920,
    "period": "swing",
    "timeframe": "1h",
    "created_at": "2025-11-29T10:30:00Z"
  },
  "error": null,
  "metadata": {
    "timestamp": "2025-11-29T10:30:00Z",
    "version": "v1"
  }
}

// 錯誤回應
{
  "success": false,
  "data": null,
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Invalid API key"
  },
  "metadata": {
    "timestamp": "2025-11-29T10:30:00Z",
    "version": "v1"
  }
}
```

---

## 👤 用戶識別系統

### 用戶識別方式

**本系統不使用傳統的 Email/密碼註冊登入**，而是透過 Bot 平台的唯一識別碼來識別用戶：

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        用戶識別架構                                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     Discord 用戶識別                                 │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   • 識別碼: Discord User ID (Snowflake ID)                                  │
│   • 格式: 18-19 位數字 (例: 123456789012345678)                             │
│   • 獲取方式: Discord.js interaction.user.id                                │
│   • 儲存表: user_discord_settings                                           │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     LINE 用戶識別                                    │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   • 識別碼: LINE User ID                                                    │
│   • 格式: U 開頭 + 32 位十六進位 (例: U1234567890abcdef1234567890abcdef)    │
│   • 獲取方式: LINE Bot SDK event.source.userId                              │
│   • 儲存表: user_line_settings                                              │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     用戶首次互動流程                                 │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   Discord:                                                                   │
│   1. 用戶在 Discord 輸入 /subscribe                                         │
│   2. Bot 獲取 interaction.user.id                                           │
│   3. Bot 呼叫 POST /api/v1/discord/users/{discordId}/subscribe              │
│   4. Backend 在 user_discord_settings 建立記錄                              │
│   5. 用戶開始接收訊號推送                                                   │
│                                                                              │
│   LINE:                                                                      │
│   1. 用戶在 LINE 發送 "訂閱"                                                │
│   2. Bot 獲取 event.source.userId                                           │
│   3. Bot 呼叫 POST /api/v1/line/users/{lineId}/subscribe                    │
│   4. Backend 在 user_line_settings 建立記錄                                 │
│   5. 用戶開始接收訊號推送                                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 用戶資料表結構

```sql
-- Discord 用戶表
CREATE TABLE user_discord_settings (
    id SERIAL PRIMARY KEY,
    discord_id VARCHAR(20) UNIQUE NOT NULL,  -- Discord User ID
    guild_id VARCHAR(20),                     -- 伺服器 ID (可選)
    is_subscribed BOOLEAN DEFAULT false,      -- 訂閱狀態
    preferred_pairs TEXT[],                   -- 偏好貨幣對
    notification_enabled BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- LINE 用戶表
CREATE TABLE user_line_settings (
    id SERIAL PRIMARY KEY,
    line_user_id VARCHAR(50) UNIQUE NOT NULL, -- LINE User ID
    display_name VARCHAR(100),                 -- 顯示名稱 (可選)
    is_subscribed BOOLEAN DEFAULT false,       -- 訂閱狀態
    preferred_pairs TEXT[],                    -- 偏好貨幣對
    notification_enabled BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## 🗄 資料庫設計

### ER Diagram

```
┌─────────────────────┐                   ┌─────────────────────┐
│user_discord_settings│                   │  user_line_settings │
├─────────────────────┤                   ├─────────────────────┤
│ id (PK)             │                   │ id (PK)             │
│ discord_id (UNIQUE) │                   │ line_user_id(UNIQUE)│
│ guild_id            │                   │ display_name        │
│ is_subscribed       │                   │ is_subscribed       │
│ preferred_pairs     │                   │ preferred_pairs     │
│ notification_enabled│                   │ notification_enabled│
│ created_at          │                   │ created_at          │
│ updated_at          │                   │ updated_at          │
└─────────────────────┘                   └─────────────────────┘

┌─────────────────┐       ┌─────────────────┐       ┌─────────────────┐
│ trading_signals │       │   market_data   │       │backtest_results │
├─────────────────┤       ├─────────────────┤       ├─────────────────┤
│ id (PK)         │       │ id (PK)         │       │ id (PK)         │
│ pair            │       │ pair            │       │ pair            │
│ action          │       │ timeframe       │       │ period          │
│ confidence      │       │ open            │       │ timeframe       │
│ entry_price     │       │ high            │       │ total_trades    │
│ stop_loss       │       │ low             │       │ win_rate        │
│ take_profit     │       │ close           │       │ profit_factor   │
│ period          │       │ volume          │       │ max_drawdown    │
│ timeframe       │       │ timestamp       │       │ sharpe_ratio    │
│ created_at      │       │ created_at      │       │ net_profit      │
└─────────────────┘       └─────────────────┘       │ created_at      │
                                                     └─────────────────┘
```

### 資料表說明

| 資料表 | 描述 |
|--------|------|
| `user_discord_settings` | Discord 用戶設定與訂閱狀態 |
| `user_line_settings` | LINE 用戶設定與訂閱狀態 |
| `trading_signals` | 交易訊號記錄 |
| `market_data` | 市場歷史數據 |
| `backtest_results` | 回測結果摘要 |
| `backtest_trades` | 回測交易明細 |

---

## 📊 回測系統

### 績效指標 (8 項)

| 指標 | 英文 | 計算方式 |
|------|------|----------|
| **勝率** | Win Rate | 獲利交易數 ÷ 總交易數 × 100% |
| **盈虧比** | Profit Factor | 總獲利 ÷ 總虧損 |
| **總交易數** | Total Trades | 完成的交易次數 |
| **淨盈利** | Net Profit | 總獲利 - 總虧損 |
| **平均獲利** | Avg Win | 獲利交易平均金額 |
| **平均虧損** | Avg Loss | 虧損交易平均金額 |
| **最大回撤** | Max Drawdown | 權益曲線最大跌幅 |
| **夏普比率** | Sharpe Ratio | (報酬率 - 無風險利率) ÷ 標準差 |

### 執行回測

```bash
cd ml_engine
python backtest/run_historical_backtest.py
```

### 回測結果範例

| 貨幣對 | 週期 | 交易數 | 勝率 | 盈虧比 | 淨盈利 |
|--------|------|--------|------|--------|--------|
| EUR/USD | Intraday | 9 | 33.3% | 1.85 | $227 |
| EUR/USD | Swing | 25 | 36.0% | 0.57 | -$886 |
| **USD/JPY** | **Swing** | **29** | **51.7%** | **1.73** | **$2,103** |
| GBP/USD | Position | 4 | 50.0% | 1.43 | $540 |

---

## 🔔 通知系統

### Discord Bot 命令

| 命令 | 描述 |
|------|------|
| `/signal` | 查詢最新交易訊號 |
| `/signal [貨幣對]` | 查詢特定貨幣對訊號 |
| `/subscribe` | 訂閱訊號推送 |
| `/unsubscribe` | 取消訂閱 |
| `/status` | 查看訂閱狀態 |
| `/help` | 顯示幫助訊息 |

### LINE Bot 指令

| 指令 | 描述 |
|------|------|
| `訂閱` | 訂閱交易訊號 |
| `取消訂閱` | 取消訂閱 |
| `訊號` | 查詢所有最新訊號 |
| `EUR/USD` | 查詢特定貨幣對訊號 |
| `狀態` | 查看訂閱狀態 |
| `幫助` | 顯示幫助訊息 |

### 訊號推送格式

```
📊 AIFX 交易訊號

貨幣對：EUR/USD
方向：買入 (Long)
信心度：75%
週期：波段 (1H)
時間：2025-11-29 10:30:00

⚠️ 本系統僅提供方向建議，請自行決定進場價位與風險管理
```

---

## 🌐 部署指南

### PM2 部署

```bash
# 安裝 PM2
npm install -g pm2

# 啟動 Backend
cd backend && pm2 start npm --name "aifx-backend" -- run dev

# 啟動 ML Engine
cd ../ml_engine && pm2 start python --name "aifx-ml" -- api/ml_server.py

# 啟動 Discord Bot
cd ../discord_bot && pm2 start npm --name "aifx-discord" -- start

# 啟動 LINE Bot
cd ../line_bot && pm2 start npm --name "aifx-line" -- start

# 查看狀態
pm2 status

# 保存配置
pm2 save
pm2 startup
```

### 服務端口

| 服務 | 端口 | 說明 |
|------|------|------|
| Backend API | 3000 | REST API 服務 |
| ML Engine | 8000 | 機器學習預測服務 |
| PostgreSQL | 5432 | 資料庫 |
| Redis | 6379 | 快取服務 |

---

## 🔮 未來展望

- 提高 ML 模型預測準確率
- 支援更多貨幣對與市場

---

## ❓ 常見問題

### Q1: 系統的預測準確率如何？

根據回測結果，最佳表現的組合 (USD/JPY Swing) 勝率可達 **51.7%**。我們持續優化模型以提高準確率。

### Q2: 支援哪些貨幣對？

目前支援三個主要貨幣對：
- EUR/USD (歐元/美元)
- USD/JPY (美元/日圓)
- GBP/USD (英鎊/美元)

### Q3: 訊號多久更新一次？

| 週期 | 更新頻率 |
|------|----------|
| 日內交易 (Intraday) | 每 15 分鐘 |
| 波段交易 (Swing) | 每 1 小時 |
| 部位交易 (Position) | 每 1 天 |
| 長期交易 (Longterm) | 每 1 週 |

### Q4: 用戶如何訂閱訊號？

用戶只需要在 Discord 輸入 `/subscribe` 或在 LINE 發送「訂閱」，系統會自動記錄用戶的平台 ID 並開始推送訊號。**不需要另外註冊帳號。**

---

## ⚠️ 免責聲明

**重要提醒**：

1. 本系統提供的交易訊號僅供參考，不構成投資建議
2. 外匯交易涉及高風險，可能導致資金損失
3. 過去的回測表現不保證未來的實際結果
4. 用戶應自行評估風險並做出交易決策
5. 開發團隊不對任何交易損失負責

---

## 📄 授權

本專案採用 MIT 授權條款

---

## 🙏 致謝

- [Alpha Vantage](https://www.alphavantage.co/) - 外匯數據 API
- [Twelve Data](https://twelvedata.com/) - 市場數據 API
- [yFinance](https://github.com/ranaroussi/yfinance) - 歷史數據
- [TensorFlow](https://www.tensorflow.org/) - 深度學習框架
- Open Source Community

---

---

## 📝 更新日誌

### 2025-12-02

#### 修復
- **Discord Bot API Key 認證**: 修正 `authenticateFlexible` 中間件，支援 `DISCORD_BOT_API_KEY` 認證
- **LINE Bot 用戶註冊**: 修正參數名稱 (`displayName` → `lineDisplayName`) 及 username 驗證邏輯
- **API Key 衝突**: 為 Discord Bot 和 LINE Bot 生成獨立的 API Key，避免服務識別衝突
- **Webhook 轉發**: 在 Backend 添加 webhook proxy，將 LINE webhook 請求轉發至 LINE Bot 服務

#### 新增
- **Admin Dashboard v2**: 新增簡化版 Python 管理後台 (純 HTTP 請求)
- **訊號篩選器**: Admin Dashboard 訊號頁面新增貨幣對、週期、方向篩選功能
- **排程訊號服務**: 新增 `scheduledSignalService.js` 支援自動訊號生成

#### 改進
- **用戶管理**: 後台現可顯示 Discord 和 LINE 用戶
- **服務架構**: 強化微服務間的 API 認證機制

---

<div align="center">

**AIFX v2** - *Empowering Traders with AI*

Made with ❤️ by AIFX Team

[GitHub](https://github.com/LazOof69/AIFX_v2) •
[回報問題](https://github.com/LazOof69/AIFX_v2/issues)

</div>
